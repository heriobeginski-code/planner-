<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PODIUM | CHRONOS v5.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@300;400;600&display=swap');
        :root { --chrome-bg: #020406; --teal: #00f2ff; --gold: #ffcc00; --red: #ff4d4d; --glass: rgba(255, 255, 255, 0.03); --border: rgba(255, 255, 255, 0.08); }
        body { background: var(--chrome-bg); color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }
        .font-vault { font-family: 'Space Grotesk', sans-serif; }
        .app-layout { display: grid; grid-template-columns: 300px 1fr; height: 100vh; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: auto repeat(6, 1fr); height: 100%; gap: 1px; background: var(--border); }
        .cal-cell { background: #020406; padding: 0.5rem; display: flex; flex-direction: column; gap: 4px; min-height: 100px; overflow-y: auto; }
        .task-tag { font-size: 8px; padding: 3px 6px; border-radius: 4px; text-transform: uppercase; background: rgba(255,255,255,0.05); border-left: 3px solid var(--teal); cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .tag-high { border-color: var(--red); color: var(--red); }
        .tag-ritual { border-color: var(--gold); color: var(--gold); }
        .sidebar-btn { width: 100%; text-align: left; padding: 10px 14px; border-radius: 12px; background: var(--glass); border: 1px solid var(--border); font-size: 10px; text-transform: uppercase; letter-spacing: 1px; transition: 0.2s; margin-bottom: 4px; }
        .sidebar-btn:hover { border-color: var(--teal); background: rgba(0, 242, 255, 0.05); }
        .modal-overlay { background: rgba(0,0,0,0.95); backdrop-filter: blur(40px); display: none; position: fixed; inset: 0; z-index: 100; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        input, select, textarea { background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: white; padding: 10px; border-radius: 10px; width: 100%; outline: none; font-size: 12px; }
        .category-label { font-size: 9px; font-weight: bold; color: rgba(255,255,255,0.3); letter-spacing: 2px; text-transform: uppercase; margin: 15px 0 8px 5px; display: block; }
    </style>
</head>
<body>

    <div class="app-layout">
        <aside class="flex flex-col border-r border-white/5 bg-black/40 p-5 overflow-y-auto">
            <h1 class="font-vault text-2xl font-bold tracking-tighter mb-1">CHRONOS v5</h1>
            <p class="text-[8px] opacity-30 uppercase tracking-[4px] mb-6">Mission Templates</p>

            <span class="category-label">Digital / Online</span>
            <button class="sidebar-btn" onclick="openConfig('AI Tools (YC)', 'study')">AI Tools</button>
            <button class="sidebar-btn" onclick="openConfig('Tinker Session', 'study')">Tinker</button>
            <button class="sidebar-btn" onclick="openConfig('Instagram Content', 'ritual')">Instagram</button>
            <button class="sidebar-btn" onclick="openConfig('TikTok Content', 'ritual')">TikTok</button>
            <button class="sidebar-btn" onclick="openConfig('YouTube Upload', 'ritual')">YouTube</button>

            <span class="category-label">House & Body</span>
            <button class="sidebar-btn" onclick="openConfig('House Upkeep', 'ritual')">Daily Chores</button>
            <button class="sidebar-btn" onclick="openConfig('Deep Clean', 'high')">Friday Deep Clean</button>
            <button class="sidebar-btn" onclick="openConfig('Laundry Day', 'ritual')">Laundry</button>
            <button class="sidebar-btn" onclick="openConfig('Pantry/Grocery', 'high')">Food Planning</button>

            <span class="category-label">Management</span>
            <button class="sidebar-btn" onclick="openConfig('Pets', 'high')">Pets</button>
            <button class="sidebar-btn" onclick="openConfig('Errands', 'ritual')">Errands</button>
            <button class="sidebar-btn" onclick="openConfig('Appointments', 'high')">Appointments</button>
            <button class="sidebar-btn" onclick="openConfig('Personal Maint', 'ritual')">Maintenance</button>

            <button onclick="openRegistry()" class="mt-8 py-3 rounded-xl border border-teal-400/30 text-teal-400 text-[10px] uppercase font-bold tracking-widest hover:bg-teal-400 hover:text-black transition-all">View All Active Missions</button>
        </aside>

        <main class="flex flex-col">
            <header class="p-6 border-b border-white/5 flex justify-between items-center">
                <h2 id="calendar-title" class="font-vault text-xl uppercase tracking-widest font-bold">Month</h2>
                <div class="flex gap-4"><button onclick="changeMonth(-1)">←</button><button onclick="changeMonth(1)">→</button></div>
            </header>
            <div id="calendar-container" class="calendar-grid flex-1"></div>
        </main>
    </div>

    <div id="config-modal" class="modal-overlay">
        <div class="bg-[#05070a] border border-white/10 w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl">
            <h3 id="conf-title" class="text-teal-400 font-vault text-lg tracking-[0.2em] mb-6 uppercase">Config Mission</h3>
            <div class="space-y-4">
                <div><label class="text-[9px] opacity-40 uppercase ml-1">Mission Name</label><input type="text" id="conf-name"></div>
                <div><label class="text-[9px] opacity-40 uppercase ml-1">Frequency</label>
                    <select id="conf-freq">
                        <option value="once">One-Time Injection</option>
                        <option value="daily">Daily Loop</option>
                        <option value="weekly">Weekly Loop</option>
                    </select>
                </div>
                <div><label class="text-[9px] opacity-40 uppercase ml-1">Start Date / Date</label><input type="date" id="conf-date"></div>
                <div><label class="text-[9px] opacity-40 uppercase ml-1">Checklist / Details</label><textarea id="conf-steps" placeholder="Step 1: ... &#10;Step 2: ..." rows="3"></textarea></div>
                <button onclick="processInjection()" class="w-full py-4 bg-white text-black rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] mt-4 hover:bg-teal-400 transition-all">Deploy to Calendar</button>
                <button onclick="closeModals()" class="w-full text-[9px] opacity-30 uppercase tracking-widest mt-2">Cancel</button>
            </div>
        </div>
    </div>

    <div id="registry-modal" class="modal-overlay">
        <div class="bg-[#05070a] border border-white/10 w-full max-w-2xl rounded-[2.5rem] p-10 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6"><h3 class="font-vault text-xl uppercase">Registry</h3><button onclick="closeModals()" class="text-[10px] opacity-40">Close</button></div>
            <div id="registry-list" class="space-y-2"></div>
        </div>
    </div>

    <script>
        let missions = JSON.parse(localStorage.getItem('CHRONOS_V5_DATA')) || [
            { id: 'cap-1', name: "Capoeira", date: "2026-02-16", type: "ritual", freq: "weekly", days: [1,3,4,5] },
            { id: 'sat-1', name: "Sat Meeting", date: "2026-02-21", type: "high", freq: "weekly", days: [6], time: "14:30" }
        ];

        let viewDate = new Date();
        let currentType = 'study';

        function renderCalendar() {
            const container = document.getElementById('calendar-container');
            container.innerHTML = `<div class="cal-header">Sun</div><div class="cal-header">Mon</div><div class="cal-header">Tue</div><div class="cal-header">Wed</div><div class="cal-header">Thu</div><div class="cal-header">Fri</div><div class="cal-header">Sat</div>`;
            const year = viewDate.getFullYear(), month = viewDate.getMonth();
            document.getElementById('calendar-title').innerText = viewDate.toLocaleString('default', { month: 'long', year: 'numeric' });
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for(let i=0; i<firstDay; i++) container.innerHTML += `<div class="cal-cell opacity-5"></div>`;

            for(let d=1; d<=daysInMonth; d++) {
                const dateObj = new Date(year, month, d);
                const dateStr = dateObj.toISOString().split('T')[0];
                const dayOfWeek = dateObj.getDay();
                const cell = document.createElement('div');
                cell.className = 'cal-cell';
                cell.innerHTML = `<span class="text-[10px] font-bold opacity-20">${d}</span>`;
                
                missions.forEach(m => {
                    let shouldShow = false;
                    if(m.freq === 'once' && m.date === dateStr) shouldShow = true;
                    if(m.freq === 'daily') shouldShow = true;
                    if(m.freq === 'weekly' && (m.days ? m.days.includes(dayOfWeek) : new Date(m.date).getDay() === dayOfWeek)) shouldShow = true;

                    if(shouldShow) {
                        const tag = document.createElement('div');
                        tag.className = `task-tag ${m.type === 'high' ? 'tag-high' : m.type === 'ritual' ? 'tag-ritual' : ''}`;
                        tag.innerText = (m.time ? m.time + " " : "") + m.name;
                        tag.onclick = (e) => { e.stopPropagation(); deleteMission(m.id); };
                        cell.appendChild(tag);
                    }
                });
                container.appendChild(cell);
            }
        }

        function openConfig(name, type) {
            currentType = type;
            document.getElementById('conf-name').value = name;
            document.getElementById('conf-date').value = new Date().toISOString().split('T')[0];
            document.getElementById('config-modal').classList.add('active');
        }

        function processInjection() {
            const name = document.getElementById('conf-name').value;
            const date = document.getElementById('conf-date').value;
            const freq = document.getElementById('conf-freq').value;
            const steps = document.getElementById('conf-steps').value;

            const newMission = { id: Date.now(), name, date, freq, type: currentType, steps };
            missions.push(newMission);
            sync();
        }

        function openRegistry() {
            const list = document.getElementById('registry-list');
            list.innerHTML = missions.map(m => `
                <div class="flex justify-between p-4 bg-white/5 rounded-xl border border-white/5">
                    <div><div class="text-[10px] font-bold uppercase">${m.name}</div><div class="text-[8px] opacity-40">${m.freq} | Start: ${m.date}</div></div>
                    <button onclick="deleteMission(${m.id})" class="text-red-400 text-[10px]">Remove</button>
                </div>
            `).join('');
            document.getElementById('registry-modal').classList.add('active');
        }

        function deleteMission(id) { missions = missions.filter(m => m.id != id); sync(); }
        function sync() { localStorage.setItem('CHRONOS_V5_DATA', JSON.stringify(missions)); closeModals(); renderCalendar(); }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active')); }
        function changeMonth(dir) { viewDate.setMonth(viewDate.getMonth() + dir); renderCalendar(); }

        renderCalendar();
    </script>
</body>
</html>
