<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PODIUM | CHRONOS v4.4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@300;400;600&display=swap');

        :root {
            --chrome-bg: #020406;
            --teal-accent: #00f2ff;
            --gold-accent: #ffcc00;
            --red-accent: #ff4d4d;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        body { background-color: var(--chrome-bg); color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }
        .font-vault { font-family: 'Space Grotesk', sans-serif; }

        .app-layout { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        .glass-panel { background: var(--glass); backdrop-filter: blur(40px); border: 1px solid var(--glass-border); }

        /* Calendar Grid */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: auto repeat(6, 1fr); height: 100%; gap: 1px; background: var(--glass-border); }
        .cal-header { background: #05070a; padding: 0.75rem; text-align: center; font-size: 10px; text-transform: uppercase; color: rgba(255,255,255,0.4); }
        .cal-cell { background: #020406; padding: 0.5rem; display: flex; flex-direction: column; gap: 4px; min-height: 100px; overflow-y: auto; }

        /* Task Labels */
        .task-tag { font-size: 9px; padding: 4px 8px; border-radius: 6px; text-transform: uppercase; background: rgba(255,255,255,0.05); border-left: 3px solid transparent; cursor: pointer; }
        .tag-study { border-color: var(--teal-accent); color: var(--teal-accent); }
        .tag-ritual { border-color: var(--gold-accent); color: var(--gold-accent); }
        .tag-high { border-color: var(--red-accent); color: var(--red-accent); }

        .btn-prime { background: white; color: black; padding: 12px; border-radius: 14px; font-size: 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.1em; width: 100%; transition: 0.2s; }
        .btn-prime:hover { background: var(--teal-accent); }

        input, select { background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); color: white; padding: 10px; border-radius: 10px; width: 100%; outline: none; }
        
        .modal-overlay { background: rgba(0,0,0,0.9); backdrop-filter: blur(40px); display: none; position: fixed; inset: 0; z-index: 100; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
    </style>
</head>
<body>

    <div class="app-layout">
        <aside class="flex flex-col border-r border-white/5 bg-black/40 p-6">
            <div class="mb-10">
                <h1 class="font-vault text-2xl font-bold tracking-tighter">CHRONOS v4.4</h1>
                <p class="text-[9px] opacity-40 uppercase tracking-[0.3em]">Master Mission Control</p>
            </div>

            <div class="space-y-6">
                <button onclick="openRegistry()" class="btn-prime">Manage All Missions</button>
                
                <div class="pt-6 border-t border-white/5">
                    <h2 class="text-[10px] tracking-[0.3em] uppercase opacity-40 font-bold mb-4">Quick Shortcuts</h2>
                    <div class="grid gap-2">
                        <button onclick="quickAdd('Pets', 'high')" class="text-left text-[11px] p-3 rounded-xl bg-white/5 hover:bg-white/10">＋ Pets</button>
                        <button onclick="quickAdd('Errands', 'ritual')" class="text-left text-[11px] p-3 rounded-xl bg-white/5 hover:bg-white/10">＋ Errands</button>
                        <button onclick="quickAdd('Appt', 'high')" class="text-left text-[11px] p-3 rounded-xl bg-white/5 hover:bg-white/10">＋ Appointment</button>
                    </div>
                </div>
            </div>
        </aside>

        <main class="flex flex-col">
            <header class="p-6 flex justify-between items-center border-b border-white/5">
                <h2 id="calendar-title" class="font-vault text-xl uppercase tracking-widest font-bold">Month</h2>
                <div class="flex gap-4">
                    <button onclick="changeMonth(-1)" class="opacity-40 hover:opacity-100">←</button>
                    <button onclick="changeMonth(1)" class="opacity-40 hover:opacity-100">→</button>
                </div>
            </header>
            <div id="calendar-container" class="calendar-grid flex-1">
                </div>
        </main>
    </div>

    <div id="registry-modal" class="modal-overlay">
        <div class="glass-panel w-full max-w-2xl rounded-[2.5rem] p-10 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-8">
                <h3 class="font-vault text-xl uppercase tracking-widest">Global Mission Registry</h3>
                <button onclick="closeModals()" class="text-[10px] opacity-40 uppercase">Close</button>
            </div>
            
            <button onclick="triggerNewTask()" class="w-full border border-dashed border-white/20 p-4 rounded-2xl mb-6 hover:border-teal-400 text-[10px] uppercase tracking-widest">+ Add New Mission to Month</button>

            <div id="registry-list" class="space-y-3">
                </div>
        </div>
    </div>

    <div id="task-modal" class="modal-overlay">
        <div class="glass-panel w-full max-w-sm rounded-[2.5rem] p-10">
            <h3 id="form-title" class="text-teal-400 font-vault text-sm tracking-[0.3em] mb-6 uppercase">Mission Config</h3>
            <div class="space-y-4">
                <input type="text" id="in-name" placeholder="Mission Name (e.g. Vet Visit)">
                <input type="date" id="in-date">
                <select id="in-type">
                    <option value="study">Study / Growth (Cyan)</option>
                    <option value="ritual">Routine / Ritual (Gold)</option>
                    <option value="high">High Priority / Appt (Red)</option>
                </select>
                <button onclick="saveMission()" class="btn-prime !bg-teal-400 mt-4">Confirm Injection</button>
                <button id="del-btn" onclick="deleteCurrent()" class="w-full text-red-400 text-[9px] uppercase tracking-widest font-bold mt-2 hidden">Abort Mission</button>
            </div>
        </div>
    </div>

    <script>
        let missions = JSON.parse(localStorage.getItem('CHRONOS_MISSIONS')) || [
            { id: 1, name: "Capoeira", date: "2026-02-16", type: "ritual" },
            { id: 2, name: "Duolingo", date: "2026-02-21", type: "study" },
            { id: 3, name: "Vet: Dog", date: "2026-02-23", type: "high" }
        ];

        let viewDate = new Date();
        let activeEditId = null;

        function renderCalendar() {
            const container = document.getElementById('calendar-container');
            container.innerHTML = `<div class="cal-header">Sun</div><div class="cal-header">Mon</div><div class="cal-header">Tue</div><div class="cal-header">Wed</div><div class="cal-header">Thu</div><div class="cal-header">Fri</div><div class="cal-header">Sat</div>`;
            
            const year = viewDate.getFullYear();
            const month = viewDate.getMonth();
            document.getElementById('calendar-title').innerText = viewDate.toLocaleString('default', { month: 'long', year: 'numeric' });

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for(let i=0; i<firstDay; i++) container.innerHTML += `<div class="cal-cell opacity-5"></div>`;

            for(let d=1; d<=daysInMonth; d++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const cell = document.createElement('div');
                cell.className = 'cal-cell';
                cell.innerHTML = `<span class="text-[10px] font-bold opacity-30 mb-2">${d}</span>`;
                
                missions.filter(m => m.date === dateStr).forEach(m => {
                    const tag = document.createElement('div');
                    tag.className = `task-tag tag-${m.type}`;
                    tag.innerText = m.name;
                    tag.onclick = (e) => { e.stopPropagation(); editMission(m.id); };
                    cell.appendChild(tag);
                });

                cell.onclick = () => quickAdd('', 'study', dateStr);
                container.appendChild(cell);
            }
        }

        function openRegistry() {
            const list = document.getElementById('registry-list');
            list.innerHTML = missions.sort((a,b) => new Date(a.date) - new Date(b.date)).map(m => `
                <div class="flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5">
                    <div>
                        <div class="text-[9px] uppercase tracking-widest opacity-40">${m.date}</div>
                        <div class="font-bold text-sm uppercase">${m.name}</div>
                    </div>
                    <button onclick="editMission(${m.id})" class="text-[10px] text-teal-400 border border-teal-400/30 px-3 py-1 rounded-lg">Edit</button>
                </div>
            `).join('');
            document.getElementById('registry-modal').classList.add('active');
        }

        function triggerNewTask() {
            closeModals();
            quickAdd('', 'study');
        }

        function quickAdd(name, type, date = "") {
            activeEditId = null;
            document.getElementById('in-name').value = name;
            document.getElementById('in-type').value = type;
            document.getElementById('in-date').value = date || new Date().toISOString().split('T')[0];
            document.getElementById('del-btn').classList.add('hidden');
            document.getElementById('task-modal').classList.add('active');
        }

        function editMission(id) {
            const m = missions.find(x => x.id === id);
            activeEditId = id;
            document.getElementById('in-name').value = m.name;
            document.getElementById('in-type').value = m.type;
            document.getElementById('in-date').value = m.date;
            document.getElementById('del-btn').classList.remove('hidden');
            document.getElementById('task-modal').classList.add('active');
        }

        function saveMission() {
            const data = {
                id: activeEditId || Date.now(),
                name: document.getElementById('in-name').value,
                date: document.getElementById('in-date').value,
                type: document.getElementById('in-type').value
            };
            if(!data.name || !data.date) return;
            
            if(activeEditId) missions = missions.map(m => m.id === activeEditId ? data : m);
            else missions.push(data);
            
            sync();
        }

        function deleteCurrent() {
            missions = missions.filter(m => m.id !== activeEditId);
            sync();
        }

        function sync() {
            localStorage.setItem('CHRONOS_MISSIONS', JSON.stringify(missions));
            closeModals();
            renderCalendar();
        }

        function closeModals() {
            document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
        }

        function changeMonth(dir) { viewDate.setMonth(viewDate.getMonth() + dir); renderCalendar(); }

        renderCalendar();
    </script>
</body>
</html>
